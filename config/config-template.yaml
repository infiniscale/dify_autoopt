# 应用环境与运行配置（示例）
#
# 说明：
# - 登录信息、工作流信息与参数变量聚合在单一文件，便于快速启动与演示。
# - 建议真实环境中仅提交 *.example，实际敏感信息使用环境变量或 .env（见 .env.example）。

meta:
  version: "1.0.0"
  environment: "development"       # development | test | staging | production
  updated_by: "developer"
  updated_at: "2025-11-28T00:00:00Z"

# ===== Dify 平台配置 =====
dify:
  base_url: "http://127.0.0.1"   # Dify 实例根地址
  test_user: "auto-opt"

# ===== 登录与认证配置（演示用，建议使用环境变量替代） =====
auth:
  # 建议：将真实账号/密码存于环境变量，在此处使用 ${VAR_NAME} 占位并由加载器扩展。
  username: "${DIFY_USERNAME}"
  password: "${DIFY_PASSWORD}"

# ===== 全局参数变量（可在工作流 inputs 中复用） =====
variables:
  base_path: "./assets"           # 示例数据目录
  default_language: "zh"
  temperature: 0.7
  batch_size: 16
  retries: 2

# ===== 工作流信息（最小示例） =====
# 提示：如需使用 catalog（workflow_repository.yaml），可并行维护，CLI 会优先从 --catalog 加载。
workflows:
  - id: "3f6422ab-xxxx-xxxx-xxxx-b5df715c0080"
    name: "测试工作流文件"  # 会注入提示词中需要表明当前工作流的名称
    description: "对输入文本进行格式转换A" # 会注入提示词中，主要表明工作流的主要功能
    api_key: "app-bO8xxxxxxxxcgA"
    inputs:
      ContractFile:
        type: file
        value:
          - "./docs/1.pdf"
          - "./docs/2.pdf"
          - "./docs/3.pdf"
          - "./docs/4.pdf"
      RulesetApiUrl:
        type: string
        value: "test{TIME}"
      ContractID:
        type: string
        value: "test{ID}"
      FileID:
        type: string
        value: "test{ID}"
      ReviewBG:
        type: string
        value: "testtest"
    reference:
      - "./docs/reference-rules/1_分析报告.md"
      - "./docs/reference-rules/2_分析报告.md"
      - "./docs/reference-rules/3_分析报告.md"
      - "./docs/reference-rules/4_分析报告.md"


  - id: "wf_chat_assistant"
    name: "对话助理工作流"
    description: "通用问答与摘要"
    inputs:
      prompts:
        - "请总结以下文本的要点：..."
        - "列出本文的关键结论与证据。"
      language: "${DEFAULT_LANGUAGE}"
      conversation:
        history: []
        user_input: "给出三条改进建议"

# ===== 执行与并发配置 =====
execution:
  concurrency: 5
  timeout: 90000
  retry_count: 3
  rate_limit:
    per_minute: 60
    burst: 10
  backoff:
    initial_delay: 0.5
    max_delay: 4.0
    factor: 2.0

# ===== 优化配置（示例） =====
optimization:
  # strategy: "clarity_focus"      # auto | clarity_focus | efficiency_focus | structure_focus | llm_guided
  max_iterations: 10
  prompt_state_max_steps: 5
  loop_max_cycles: 10
  exit_ratio: 0.8
  llm:
    url: "${LLM_BASE_URL}"
    model: "${LLM_MODEL}"
    api_key: "${LLM_API_KEY}"
    enable_cache: true
    cache_ttl: 86400
    health_timeout_seconds: 60
    enable_output_judge: true
    judge_timeout_seconds: 100

# ===== I/O 路径与日志 =====
io_paths:
  output_dir: "./outputs"
  logs_dir: "./logs"

logging:
  # 若不使用下方内联配置，可通过 CLI 的 --log-config 指定 config/logging_config.yaml
  level: "DEBUG"
  format: "structured"               # simple | structured
  # format: "simple"               # simple | structured
  file_enabled: true
  console_enabled: true
