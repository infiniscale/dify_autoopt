# 应用环境与运行配置（示例）
#
# 说明：
# - 登录信息、工作流信息与参数变量聚合在单一文件，便于快速启动与演示。
# - 建议真实环境中仅提交 *.example，实际敏感信息使用环境变量或 .env（见 .env.example）。

meta:
  version: "1.0.0"
  environment: "development"       # development | test | staging | production
  updated_by: "developer"
  updated_at: "2025-11-28T00:00:00Z"

# ===== Dify 平台配置 =====
dify:
  base_url: "http://localhost:3000"   # Dify 实例根地址
  api_base: "http://localhost:3000/v1"
  tenant_id: null

# ===== 登录与认证配置（演示用，建议使用环境变量替代） =====
auth:
  # 建议：将真实账号/密码存于环境变量，在此处使用 ${VAR_NAME} 占位并由加载器扩展。
  username: "${DIFY_USERNAME}"
  password: "${DIFY_PASSWORD}"
  api_key: "${DIFY_API_TOKEN}"

# ===== 全局参数变量（可在工作流 inputs 中复用） =====
variables:
  base_path: "./assets"           # 示例数据目录
  default_language: "zh"
  temperature: 0.7
  batch_size: 16
  retries: 2

# ===== 工作流信息（最小示例） =====
# 提示：如需使用 catalog（workflow_repository.yaml），可并行维护，CLI 会优先从 --catalog 加载。
workflows:
  - id: "wf_text_classify"
    name: "文本分类工作流"
    description: "对输入文本进行类别判定"
    inputs:
      file_list:
        - "${BASE_PATH}/samples/texts/sample_1.txt"
        - "${BASE_PATH}/samples/texts/sample_2.txt"
      language: "${DEFAULT_LANGUAGE}"
      top_k: 3
      max_length: 512
    parameters:
      temperature: "${TEMPERATURE}"
      batch_size: "${BATCH_SIZE}"

  - id: "wf_chat_assistant"
    name: "对话助理工作流"
    description: "通用问答与摘要"
    inputs:
      prompts:
        - "请总结以下文本的要点：..."
        - "列出本文的关键结论与证据。"
      language: "${DEFAULT_LANGUAGE}"
      conversation:
        history: []
        user_input: "给出三条改进建议"
    parameters:
      temperature: 0.5
      max_tokens: 512

# ===== 执行与并发配置 =====
execution:
  concurrency: 5
  timeout: 300                  # 秒
  retry_count: 3
  rate_limit:
    per_minute: 60
    burst: 10
  backoff:
    initial_delay: 0.5
    max_delay: 4.0
    factor: 2.0

# ===== 优化配置（示例） =====
optimization:
  strategy: "clarity_focus"      # auto | clarity_focus | efficiency_focus | structure_focus | llm_guided
  max_iterations: 3
  llm:
    url: "http://127.0.0.1"
    model: "gpt-4-turbo-preview"
    api_key_env: "OPENAI_API_KEY"
    enable_cache: true
    cache_ttl: 86400

# ===== I/O 路径与日志 =====
io_paths:
  output_dir: "./outputs"
  logs_dir: "./logs"

logging:
  # 若不使用下方内联配置，可通过 CLI 的 --log-config 指定 config/logging_config.yaml
  level: "INFO"
  format: "simple"               # simple | structured
  file_enabled: true
  console_enabled: true

